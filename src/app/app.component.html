<div class="info-table-container">
  <table id="players_table" class="info-table" [ngClass]="'size-' + tableSize">
    <thead>
      <tr>
        <th>Players</th>
        <th>Alive</th>
        <th>Ghost Votes</th>
        <th class="tan">Travelers</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>{{ playerCount }}</td>
        <td>{{ alive }}</td>
        <td>{{ ghostVotes }}</td>
        <td class="tan">{{ activeTravelers }}</td>
      </tr>
    </tbody>
  </table>

  <table id="spread_table" class="info-table" [ngClass]="'size-' + tableSize">
    <thead>
      <tr>
        <th class="good">Townsfolk</th>
        <th class="good">Outsiders</th>
        <th class="evil">Minions</th>
        <th class="evil">Demons</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="good">{{ townsfolk }}</td>
        <td class="good">{{ outsiders }}</td>
        <td class="evil">{{ minions }}</td>
        <td class="evil">{{ demons }}</td>
      </tr>
    </tbody>
  </table>

  @if (showSettings) {
    <table id="settings_table" class="info-table">
      <thead>
        <tr>
          <th>Player Count</th>
          <th class="green">Landmarks</th>
          <th class="tan">Travelers</th>
          <th>Player Size</th>
          <th>Table Size</th>
          <th>Hide</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <div class="btn-cell">
              <button id="player_count_up" class="player-btn" (click)="addPlayer()">+</button>
              <button id="player_count_down" class="player-btn" (click)="removePlayer()" [disabled]="players.length <= 1">-</button>
            </div>
          </td>
          <td>
            <div class="btn-cell">
              <button id="landmark_count_up" class="player-btn" (click)="addLandmark()">+</button>
              <button id="landmark_count_down" class="player-btn" (click)="removeLandmark()" [disabled]="landmarks.length <= 0">-</button>
            </div>
          </td>
          <td>
            <div class="btn-cell">
              <button id="traveler_count_up" class="player-btn" (click)="addTraveler()">+</button>
              <button id="traveler_count_down" class="player-btn" (click)="removeTraveler()" [disabled]="travelers.length <= 0">-</button>
            </div>
          </td>
          <td>
            <div class="btn-cell">
              <button id="player_size_up" class="player-btn" (click)="playerSizeUp()" [disabled]="playerSize === 'large'">+</button>
              <button id="player_size_down" class="player-btn" (click)="playerSizeDown()" [disabled]="playerSize === 'small'">-</button>
            </div>
          </td>
          <td>
            <div class="btn-cell">
              <button id="table_size_up" class="player-btn" (click)="tableSizeUp()" [disabled]="tableSize === 'large'">+</button>
              <button id="table_size_down" class="player-btn" (click)="tableSizeDown()" [disabled]="tableSize === 'small'">-</button>
            </div>
          </td>
          <td>
            <button id="hide_button" class="player-btn" (click)="hideSettings()"></button>
          </td>
        </tr>
      </tbody>
    </table>
  } @else {
    <button id="show_settings" class="show-settings-btn" (click)="displaySettings()">Settings</button>
  }
</div>

@for (player of players; track player.number) {
  <app-player [size]="playerSize" [number]="player.number" [initialX]="player.initialX" [initialY]="player.initialY" [texture]="player.texture" (stateChange)="onPlayerStateChange()"></app-player>
}

@for (traveler of travelers; track traveler.number) {
  <app-traveler [size]="playerSize" [number]="traveler.number" [initialX]="traveler.initialX" [initialY]="traveler.initialY" [texture]="traveler.texture" (stateChange)="onTravelerStateChange()"></app-traveler>
}

@for (landmark of landmarks; track landmark.number) {
  <app-landmark [size]="playerSize" [number]="landmark.number" [initialX]="landmark.initialX" [initialY]="landmark.initialY" [texture]="landmark.texture"></app-landmark>
}
